<!DOCTYPE html>
<html>
<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta charset="UTF-8">
		<title>Simulador PlanMy</title>
		<style type="text/css" media="print">
				body {visibility: hidden; display: none;}
		</style>

<style>
    h2 {
        font-size: 1.8rem;
        margin-bottom: 0.7px;
    }
	hr {
	    width:50%;
	    margin:10px auto;
	}
	
	#cuerpo {
		line-height: 1.4;
		width: 60%;
		height: 100%;
		visibility: visible; 
		display: all;  
		margin: 0 auto;
		font-family: "Lucida Grande", Tahoma, Verdana, sans-serif;
	}
			
	.aviso{
		text-align: center;
		font-family: "Lucida Grande", Tahoma, Verdana, sans-serif;
		font-weight: normal;
		font-size: 1.5rem;
		color: #616161;
	}
	.aviso_mini{
		text-align: center;
		font-family: "Lucida Grande", Tahoma, Verdana, sans-serif;
		font-weight: normal;
		font-size: 0.7rem;
		color: #919191;
	}
	.pie {
		font-family: "Lucida Grande", Tahoma, Verdana, sans-serif;
		position: fixed;
		bottom: 0;
		width: 95%;
		color: #c1c1c1;
		padding-bottom: 10px;
		text-align: center;
		font-size: 0.6rem;
	}
	.horizontal-list {
		display: flex;
		list-style-type: none;
		padding: 0;
		width: 100%;
		margin-bottom: -11px;
	}
	.link_precio:link, .link_precio:visited {
		background-color: #f2f2f2;
		color: black;
		text-decoration: none;
	}
	.link_precio:hover, .link_precio:active {
		background-color: gray;
		color: white;
	}
	.horizontal-list li {
		flex-grow: 1;
	}
	.horizontal-list li button {
		width: 100%;
		background: #f2f2f2;
		color: rgba(0, 0, 0, 0.6);
		font-size: 1.3rem;
		cursor: pointer;
		padding: 7px 10px;
		margin-right: -1px;
		border: 1px solid rgba(0, 0, 0, 0.2);
		box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3);
	}
	.horizontal-list li:first-child button {
		border-top-left-radius: 5px;
		border-bottom-left-radius: 5px;
	}
	.horizontal-list li:last-child button {
		border-top-right-radius: 5px;
		border-bottom-right-radius: 5px;
	}
	.horizontal-list li button.selected {
		background-color: #c1c1c1;
		color: #000000;
		box-shadow: none;
	}

	.resultado{
		color: #616161;
		text-align: center;
		font-family: "Lucida Grande", Tahoma, Verdana, sans-serif;
		font-weight: normal;
		font-size: 1.6rem;
		margin-top: 20px;
	}

	@media only screen and (max-width: 600px) {	
        h2 {
            font-size: 1.2rem;
            margin-bottom: 1px;
        }
		hr {
			width:100%;
			margin:auto;
			color: #f2f2f2;
		}
		#cuerpo {
			width: 95%;
			height: 100%;
			visibility: visible; 
			display: all;  
			margin: 0 auto;
		}
		.horizontal-list li button { 
			font-size: 0.9rem;
		}
		.resultado{
			font-size:1rem; 
			text-align: left;
		}
		.aviso{
			font-size: 0.8rem;
		}
		.aviso_mini{
			font-size: 0.6rem;
		}
	}
</style>


		

<script>

    const texto_encriptado = 
    "cb87b4ded0beb2ddcee4829594a7bcb1c886ac8fcb87b1d3d292d4d3dd918a85df94b0b9d786ac8fcb8795a5918a85df94bc81879e92ea729799a8b692879e92ea72b5bac2918a8595a4a088939ca79b7087bac4918a8596a2a07e999aefec7c8586bfa1729f84ed91829a9ab9b1729f84ed91a0bbb494a9709695aba87c8586c8c1729f84a4a387939ba5ec7c8586a7a082aca694a970e086c2c5a0879e92a084979d9e8f72bbb694a970979da79d829ae1ef9b7087b1a5918a85df94a797c793a4a486aca694a970e086c2c5a0879e92a0829e9d9e8f72bbb694a9709896a49d809ce19e8f729dabd49e859696b9b1729f84ed91a0bbb494a9709699a4a87c8586c8c1729f84a5a6899394abec7c8586a3a597c793a7a082aca694a970e086c2c5a0879e92a0879a9d9e8f72bbb694a9709997a89d8197e1efec7c8586a3a4729f84ed919d9786ac8fcb8796a7a597a786ac8fcb87b4c8bf729f84a3a3879e909291a6b786ac8f839b9aa0a589e2909291859696b9b1729f84ed91a0bbb494a970969ba2a87c8586c8c1729f84a6a183939ba4eccd918494bc83879e92ea729dabd49e829a9ab9b1729f84ed91a0bbb494a9709699aba87c8586c8c1729f84a5a8869398a7ec7c8586aab6b29499a3a197a786ac8fcb87b4c8bf729f84a3a7829e909291a6b786ac8f849a97a0a387e2909291819babd49e859696b9b1729f84ed91a0bbb494a9709794a7a87c8586c8c1729f84a7a0809399efeccde2909291a0d7d394a970e086a3a3729f84ed919d9886ac8fcb8799a3a197a786ac8fcb87b4c8bf729f84a49f829e909291a6b786ac8f859597a09f86e290929181b9a694a970e086c2c5a0879e92a1829a9d9e8f72bbb694a9709a9aa29d809de19e8f72969ab9d17f96b8b4918a85df94bfa6b586ac8f82999cab9b7087bac4918a859aa3a67e9695efec7c8586bfa2acda96a29f85b5d6e1918a85df94a48197abb4918a85df94bfa6b586ac8f829a98ab9b7087bac4918a859aa5a07e9e9cef9b708795c6b1729f84ed91a0bbb494a9709894a6a87c8586c8c1729f84a9a485939da7eccd918494bc83c1d9a49f809ab1d3e7729f84ed9181b9a694a970e086c2c5a0879e92a380999d9e8f72bbb694a9709694a2a27e9d9cefeccd918494a086879e92ea72b297cee4829594a7bfc2d486ac8fcb8795aab6b29499a3a197a786ac8fcb87b4c8bf729f84a59f849e909291a6b786ac8f879a99a0a885e2909291839babd49e859696b9b1729f84ed91a0bbb494a9709899a2a87c8586c8c1729f84aaa680e2e19e8f72b297cee4829594a7bcb1dd86ac8fcb8795a6cbc59794a2a493d4d6d7cbc59794a2a481b9a694a970e086c2c5a0879e92a3829e9d9e8f72bbb694a9709694a8a47e9d9bef9b708795a8cbc59794a2a493d4d6d7cbc59794a2a481b9a694a970e086c2c5a0879e92a3889e9d9e8f72bbb694a9709696a3a37e9b97efeccde2e19e8f72b2c5d5918a85df94bcb9d3cd94a970e086bfa1729f84ed91829a9ab9b1729f84ed91a0bbb494a9709c95aa9d889a909291a6b786ac8f81999ca0a482e2909291859696b9b1729f84ed91a0bbb494a9709e98aa9d889a909291a6b786ac8f819e9aa09f84e2e19e8f72b296cee4829594a7bfc2d486ac8fcb8799a3a197a786ac8fcb87b4c8bf729f84a3a4869d92aaa47c8586c8c1729f84a5a1849395a6eccde2909291a3d9d9d6d8bf879e92ea72b29694a970e086c7dbc4d7c594a970e086a3c392879e92ea72b5bac2918a8598aaa388939ca79b7087bac4918a8595a29f81939ca5eccde29092919d97c0e7a1809599bfd0c8879e92ea729a95a4b692879e92ea72b5bac2918a8596a6a188939ca79b7087bac4918a8599a2a07e9d97efeccde2909291b9b2c5d5918a85df94bc83879e92ea729dc0e7a1809599b5dec2ca86ac8fcb8796a7a597a786ac8fcb87b4c8bf729f84a3a5819e909291a6b786ac8f839898a0a4cde29092918195c0e7a1809599b5dec2ca86ac8fcb8796a7a597a786ac8fcb87b4c8bf729f84a3a7849e909291a6b786ac8f839d96a09f82e2909291859696b9b1729f84ed91a0bbb494a9709794a9a87c8586c8c1729f84a6a1899399a7eccde2e19e8f72ceb4d3d3729f84ed91a0d7d394a970e086a3a0729f84ed919d9986ac8fcb87bbdbd5b9879e92ea729799a8b692879e92ea72b5bac2918a8595a3a889918494c5a2879e92a0899c92a6a2cd918494a48197abb4918a85df94bfa6b586ac8f819998ab9b7087bac4918a8596a5a77e9c99ef9b708795c6b1729f84ed91a0bbb494a970969da4a87c8586c8c1729f84a5a0889394abec7c8586c0d0bed4d8d7e7c49386ac8fcb8795c6b1729f84ed91a0bbb494a9709794a7a87c8586c8c1729f84a5a2899399aaec7c8586a4c392879e92ea72b5bac2918a8596a7a289918494c5a2879e92a3819d92aba1cde290929182b9a694a970e086c2c5a0879e92a184959d9e8f72bbb694a970989da99d8498e1ef9b7087a7d7dbbc879e92ea729799a8b692879e92ea72b5bac2918a8595a6a389918494c5a2879e92a1839d92a9a4cd918494a48197abb4918a85df94bfa6b586ac8f819b9dab9b7087bac4918a8596aa9f7e959cef9b708795c6b1729f84ed91a0bbb494a9709795a9a87c8586c8c1729f84a5a4899398a4ec7c8586c0d0bed4d8d7e7c49386ac8fcb8795c6b1729f84ed91a0bbb494a9709797a2a87c8586c8c1729f84a5a780939def9b708796c6b1729f84ed91a0bbb494a970979baaa87c8586c8c1729f84a6a5809396a6eccd918494a1a4a786ac8fcb87b4c8bf729f84a4a5859e909291a6b786ac8f84989ca0a685e2e1efec7c8586a3a2729f84ed919d9986ac8fcb87bbdbd5b9879e92ea729799a8b692879e92ea72b5bac2918a8595a7a389918494c5a2879e92a1859a92a4a7cd918494a48197abb4918a85df94bfa6b586ac8f819c9dab9b7087bac4918a8596aba57e9b95ef9b708795c6b1729f84ed91a0bbb494a9709796a9a87c8586c8c1729f84a5a685939da6ec7c8586c0d0bed4d8d7e7c49386ac8fcb8795c6b1729f84ed91a0bbb494a9709798a2a87c8586c8c1729f84a5a8879398a5ec7c8586a4c392879e92ea72b5bac2918a8596aaa789918494c5a2879e92a3879b92a9a6cde290929182b9a694a970e086c2c5a0879e92a1879a9d9e8f72bbb694a9709999a79d829de1ef9b7087a7d7dbbc879e92ea729799a8b692879e92ea72b5bac2918a8595a9a889918494c5a2879e92a1899b92a8a0cd918494a48197abb4918a85df94bfa6b586ac8f829598ab9b7087bac4918a8597a5a67e9e97ef9b708795c6b1729f84ed91a0bbb494a9709799a4a87c8586c8c1729f84a6a0879396a9ec7c8586c0d0bed4d8d7e7c49386ac8fcb8795c6b1729f84ed91a0bbb494a970979aa7a87c8586c8c1729f84a6a288939ba7ec7c8586a4c392879e92ea72b5bac2918a8597a3a289918494c5a2879e92a4819d92a2a8cde290929182b9a694a970e086c2c5a0879e92a280959d9e8f72bbb694a970999da89d8696e1efeccde290929191ced694a970e086a3a0729f84ed919d9786ac8fcb87bbdbd5b9879e92ea729696aab692879e92ea72b5bac2918a859aaba87c8586c8c1729f84a3a084939babec7c8586a4a486aca694a970e086c2c5a0879e92a7829e909291a6b786ac8f81989aa0a187e2909291859696b9b1729f84ed91a0bbb494a9709694a9a87c8586c8c1729f84a3a687939aef9b708795c6b1729f84ed91a0bbb494a9709697a4a87c8586c8c1729f84a4a088939da4eccd918494b2b5d1d094a970e086a3a188aca694a970e086c2c5a0879e92a7869e909291a6b786ac8f819996a0a789e2909291829a9ab9b1729f84ed91a0bbb494a9709e9dab9b7087bac4918a8595a8a37e989bef9b708799a3a197a786ac8fcb87b4c8bf729f84a3a1849e909291a6b786ac8f829599a0a6cd918494a0a4a786ac8fcb87b4c8bf729f84a3a3899e909291a6b786ac8f82999ba09f82e2e1efec7c8586a3a2729f84ed919d9786ac8fcb87bbdbd5b9879e92ea729696aab692879e92ea72b5bac2918a859da6a87c8586c8c1729f84a3a4869395a3ec7c8586a4a486aca694a970e086c2c5a0879e92a0809c9d9e8f72bbb694a970969ba99d86e2909291859696b9b1729f84ed91a0bbb494a9709697a4a87c8586c8c1729f84a4a088939da4ec7c8586a3c392879e92ea72b5bac2918a8595a7a689918494c5a2879e92a1869592a4a3cde290929193cad0de918a85df94a0829dabb4918a85df94bfa6b586ac8f819695ab9b7087bac4918a8595aaa37e9795ef9b708796a7a597a786ac8fcb87b4c8bf729f84a3a1849e909291a6b786ac8f829599a0a6cd918494a48197abb4918a85df94bfa6b586ac8f81999dab9b7087bac4918a8596a6a67e9596ef9b708795c6b1729f84ed91a0bbb494a970969ba6a87c8586c8c1729f84a4a7889397a6eccde2e1ef9b70879de6d7729f84ed91a7cecadb918a85df94a584aca694a970e086c2c5a0879e92a2899e909291a6b786ac8f849d92abec7c8586a4a486aca694a970e086c2c5a0879e92a4869e909291a6b786ac8f869e92aba7cde290929193cad0de918a85df94a584aca694a970e086c2c5a0879e92a4849e909291a6b786ac8f869c92a7ec7c8586a4a486aca694a970e086c2c5a0879e92a6819e909291a6b786ac8f889d92a7a6cde2e19e8f729694e6d7729f84ed91a7cecadb918a85df94a584aca694a970e086c2c5a0879e92a3829e909291a6b786ac8f879592a3a5cd918494a1859babb4918a85df94bfa6b586ac8f859e9d9e8f72bbb694a9709e9ca0a186e2e19e8f72a8c9dedb729f84ed918699abb4918a85df94bfa6b586ac8f859e9d9e8f72bbb694a9709e9ca0a186e2909291829a9ab9b1729f84ed91a0bbb494a9709c9aab9b7087bac4918a8595a4a57e989aefeccd918494bcb9d3cd94a970e086c9d8b6ce86ac8fcb879aa6b692879e92ea72b5bac2918a8599aba87c8586c8c1729f84aba77e979aef9b708796a7a597a786ac8fcb87b4c8bf729f84a9a589918494c5a2879e92a0829b92a5a5cde290929193cad0de918a85df94a584aca694a970e086c2c5a0879e92a6869e909291a6b786ac8f81979aa0a286e2909291829a9ab9b1729f84ed91a0bbb494a9709e97ab9b7087bac4918a8595a7a37e999aefeccde2e19e8f72b5d0d3dd9ddec0e7a1809599dbbfb8d4d2d7918a85df94d8a0cdd3e0d4acda96a29f85969a94a970e086c2e1bfc1d9a49f809ab1d3e7729f84ed91829a9ab9b1729f84ed91a0bbb494a9709698a8a87c8586c8c1729f84a5a2899394a49b7087bac4a1729f84a4a3829395a8ec7c8586a7a082aca694a970e086c2c5a0879e92a087969d9e8f72bbb694a970989da89d889c909291a6b79694a970979ca59d849de19e8f7296b8b4918a85df94bfa6b586ac8f819e9aab9b7087bac4918a8598a7a37e9c979e8f72bbb6a4918a8597a4a37e9de1ef9b7087b4e4de729f84ed9181979cb9b1729f84ed91a0bbb494a9709696a3a87c8586c8c1729f84a4a7819395a99b7087bac4a1729f84a49f80939ca6ec7c8586a4a486aca694a970e086c2c5a0879e92a083999d9e8f72bbb694a9709895a39d829b909291a6b79694a9709796a49d8398e19e8f729a95a4b692879e92ea72b5bac2918a8595a7a889918494c5a2879e92a2869e92a3a07c8586c8c182879e92a1869892a8a4cd918494a0a4a786ac8fcb87b4c8bf729f84a3a7849e909291a6b786ac8f84979aa0a886918494c5a29786ac8f839598a0a887e2e19e8f72b5d0e7e2729f84ed9181979cb9b1729f84ed91a0bbb494a9709695a2a87c8586c8c1729f84a4a485939ba49b7087bac4a1729f84a3a782939aa8ec7c8586a4a486aca694a970e086c2c5a0879e92a082989d9e8f72bbb694a970979ca79d88918494c5a29786ac8f829598a0a084e2909291859696b9b1729f84ed91a0bbb494a9709698aaa87c8586c8c1729f84a5a383939aa79b7087bac4a1729f84a4a3859398a9eccd918494bdbfd7d1d3db729f84ed9181979cb9b1729f84ed91a0bbb494a9709e99ab9b7087bac4918a8596a4a07e95959e8f72bbb6a4918a8595a7a67e9d9aef9b708796a7a597a786ac8fcb87b4c8bf729f84a39f889e909291a6b786ac8f829a95a09f89918494c5a29786ac8f819c9da0a285e2909291859696b9b1729f84ed91a0bbb494a9709697a5a87c8586c8c1729f84a59f88939da69b7087bac4a1729f84a4a180939aa9eccde2909291b9b5cce1ddb5c1d9a49f809a95a7918a85df94bfc2d4c0e7a1809599bfd0c8879e92ea729799a8b692879e92ea72b5bac2918a8595a5a389918494c5a2879e92a1829792a5a27c8586c8c182879e92a0819692a3a5cd918494a48197abb4918a85df94bfa6b586ac8f819a9dab9b7087bac4918a8596a8a27e9b999e8f72bbb6a4918a8595a5a07e9d96ef9b708795c6b1729f84ed91a0bbb494a970969ca6a87c8586c8c1729f84a59f84939da99b7087bac4a1729f84a3a4829398abeccd918494bfc2d486ac8fcb8795a4a797a786ac8fcb87b4c8bf729f84a3a0819e909291a6b786ac8f819d98a0a281918494c5a29786ac8f899792a3a4cd918494a1859babb4918a85df94bfa6b586ac8f819798ab9b7087bac4918a8596a2a47e9d909291a6b79694a9709694a49d89e2909291859696b9b1729f84ed91a0bbb494a9709698aba87c8586c8c1729f84a4a3879395a49b7087bac4a1729f84a3a1839399a8ec7c8586a3c392879e92ea72b5bac2918a8595a9a389918494c5a2879e92a1889d92a6a37c8586c8c182879e92a0849992a4a1cde2909291a0d1d9e5918a85df94a0829dabb4918a85df94bfa6b586ac8f899a9d9e8f72bbb694a9709699a99d889b909291a6b79694a9709c9ca0a883e2909291829a9ab9b1729f84ed91a0bbb494a9709694aaa87c8586c8c1729f84a3a6899397a79b7087bac4a1729f84aaa87e9b9cef9b708799a3a197a786ac8fcb87b4c8bf729f84a3a2839e909291a6b786ac8f829794a0a587918494c5a29786ac8f819694a0a284e2e19e8f72b3d3e4dcb1d186ac8fcb8795a4a797a786ac8fcb87b4c8bf729f84aaa489918494c5a2879e92a0849692a5a27c8586c8c182879e92a680939aa9ec7c8586a4a486aca694a970e086c2c5a0879e92a8889e909291a6b786ac8f819b96a0a782918494c5a29786ac8f889692a6a0cd918494a48197abb4918a85df94bfa6b586ac8f819797ab9b7087bac4918a8596a2a37e96989e8f72bbb6a4918a8595a2a17e959befeccd918494d8a0cdd3e0d4acda96a29f85969894a970e086c2dbc5d886ac8fcb8795a4a797a786ac8fcb87b4c8bf729f84aaa589918494c5a2879e92a6819398ab9b7087bac4a1729f84a9a07e999def9b708796a7a597a786ac8fcb87b4c8bf729f84aba889918494c5a2879e92a7829396a69b7087bac4a1729f84aaa17e9798ef9b708799a3a197a786ac8fcb87b4c8bf729f84a3a1849e909291a6b786ac8f819596a0a87c8586c8c182879e92a0809792abeccd918494bdbfd7d1d3db729f84ed9181979cb9b1729f84ed91a0bbb494a9709c97ab9b7087bac4918a859aa29d879a909291a6b79694a9709b94a0a685e2909291829a9ab9b1729f84ed91a0bbb494a9709d9aab9b7087bac4918a859ba39d849e909291a6b79694a9709c95a0a389e2909291859696b9b1729f84ed91a0bbb494a9709695a3a87c8586c8c1729f84aba17e96999e8f72bbb6a4918a859da49d819ae1efec7c8586dbbfb8d4d2d7cbc59794a2a4819886ac8fcb87b2e1e1bdc6d094a970e086a3a188aca694a970e086c2c5a0879e92a5809e909291a6b786ac8f859592a2a07c8586c8c182879e92a4809394a3ec7c8586a4a486aca694a970e086c2c5a0879e92a6859e909291a6b786ac8f869792a69b7087bac4a1729f84a8a17e99e19e8f729a95a4b692879e92ea72b5bac2918a8595a29f89918494c5a2879e92a7839394a89b7087bac4a1729f84aaa27e959aefeccde2909291a0d1c5e0bcc9c1d9a49f809abbd3e3b3cd86ac8fcb87bbd3e3b3cdc0e7a1809599c7dbc4d7c5cee4829594a7a1729f84ed9197b5b79db2b5d1d094a970e086a6a8bdd286ac8fcb87b4c8bf729f84aaa889918494c5a2879e92a0849d92a3ec7c8586bfd8bcc6d2d7e2b5c1d9a49f809a98abdcbd879e92ea72b5bac2918a859daba87c8586c8c1729f84a3a584939aa4eccde2909291a7c6d8d5d7acda96a29f85b8c9e4d8b5d8c0e7a1809599a39f729f84ed919ed4d6dfd0bc879e92ea72acb4c5918a85df94a3809498a39e8497d1df918a85df94bfa6b586ac8f84999d9e8f72bbb694a9709e96a0a084e2909291849993a6a47f999adfdc729f84ed91a0bbb494a970999bab9b7087bac4918a859daa9d8399e1ef9b7087abc2c27ba8c9dedb729f84ed91849593a6a07f9996dfdc729f84ed91a0bbb494a9709a9aab9b7087bac4918a8595a3a57e9e98ef9b708798a69e849a93a6a5bdd286ac8fcb87b4c8bf729f84a7a889918494c5a2879e92a0829892a3a3cde2e19e8f72b9cde6d0beced9df918a85df94b6a0b88fb5d4bcd186ac8fcb8798a29e849693a6a1bdd286ac8fcb87b4c8bf729f84a9a889918494c5a2879e92a0869992a6a5cd918494a3849498a79e849bd1df918a85df94bfa6b586ac8f88999d9e8f72bbb694a970969ba69d879ee1efec7c8586c6d8c4c6d2dbe4bdc1d9a49f809ab1dbdbb1d3c9e5d4729f84ed9197b5b79db2b5d1d094a970e086a69f7f9995a1a382d2d194a970e086c2c5a0879e92a7849e909291a6b786ac8f819c98a0a689e2909291849993a6a47f999adfdc729f84ed91a0bbb494a9709d9dab9b7087bac4918a8595aaa47e9696efeccde2909291a7c6d8d5d7acda96a29f85b8c9e4d8b5d8c0e7a1809599ab918a85df94bdbfd7d1d3db729f84ed9197b5b794a970e086a69f7f9995a1a382d2d194a970e086c2c5a0879e92a2889e909291a6b786ac8f879e92a9a4cd918494a3849498a79e849bd1df918a85df94bfa6b586ac8f84969d9e8f72bbb694a9709d99a0a885e2e19e8f72acb4c59a93cad0de918a85df94a3809498a39e8497d1df918a85df94bfa6b586ac8f85959d9e8f72bbb694a9709694a69d8599e19e8f729998a1a3859498a8dcbd879e92ea72b5bac2918a8599a5a87c8586c8c1729f84a3a080939ba6eccde2909291a3d9c5dbddbccad7e5918a85df94b6a0b88fb5d4bcd186ac8fcb8798a29e849693a6a1bdd286ac8fcb87b4c8bf729f84a8a689918494c5a2879e92a0839e92a8a6cd918494a3849498a79e849bd1df918a85df94bfa6b586ac8f879d9d9e8f72bbb694a970969aa49d839ee1efec7c8586c5e3b1ced2ded4c3d8c0e7a1809599bfd8bcc6d2d7e2b5879e92ea72acb4c59a93cad0de918a85df94a3809498a39e8497d1df918a85df94bfa6b586ac8f87989d9e8f72bbb694a9709699a49d809be19e8f729998a1a3859498a8dcbd879e92ea72b5bac2918a859baaa87c8586c8c1729f84a3a5829397abeccde2e19e8f72bcc5e6d2b8c1d9a49f809ab7b7918a85df94b6a0b886ac8fcb8798a29e849693a6a1bdd286ac8fcb87b4c8bf729f84a4a389918494c5a2879e92a1809397a5ec7c8586a6a37f9999a1a386d2d194a970e086c2c5a0879e92a1879e909291a6b786ac8f829792aaa0cde290929197b5b79db2b5d1d094a970e086a69f7f9995a1a382d2d194a970e086c2c5a0879e92a1899e909291a6b786ac8f829992a6a5cd918494a3849498a79e849bd1df918a85df94bfa6b586ac8f83979d9e8f72bbb694a970979aa0a884e2e1efeccd"
	let datos_brutos;
	let datos;
	
	function borrapass(){
		localStorage.setItem('password', '');
		console.log('Contraseña borrada')
	}
	
	function decryptAsync(encryptedText, key) {
		return new Promise((resolve, reject) => {
			let decryptedText = "";
			let keyIndex = 0;
			for (let i = 0; i < encryptedText.length; i += 2) {
				let encryptedByte = parseInt(encryptedText.substr(i, 2), 16);
				decryptedText += String.fromCharCode((encryptedByte - key.charCodeAt(keyIndex % key.length) + 256) % 256);
				keyIndex++;
			}
			resolve(decryptedText);
		});
	}
	
	function recopilaSeleccionados(){
		resultado = '';
		espacio ='';
		var elem =document.getElementsByClassName("selected");
		for (const element of elem) {
			if (resultado.length!=0) espacio =' ';
				resultado = resultado +espacio+ element.textContent;
			};
		return resultado;
	}

	function estaPalabra(frase, palabra){
		let patron = `\\b${palabra}\\b`;
		let regExp = new RegExp(patron, 'g');
		let esta = regExp.test(frase)
		let result = esta ? true : false;
		return result
	}

	function CambiarPrecio(precio) {	
		let nuevo_precio = parseInt(prompt("Introduce el precio", precio));
		if (nuevo_precio != null && !isNaN(nuevo_precio)) {
			dibujaCuota(recopilaSeleccionados(), nuevo_precio, VR, VR2);
		}
	}
	
	function devuelveValores(indices) {
		console.log(indices);
		const indiceArray = indices.split(' ');
		let resultado = datos;
	    for (let i = 0; i < indiceArray.length; i++) {
	        console.log(indiceArray[i]);

			resultado = resultado[indiceArray[i]];
	    }
	    return resultado;
	}

	function showSelectedItem(item) {
		const container = document.getElementById('list-container');
		x = parseInt(item.parentElement.parentElement.id)+1;
		const nombres = devuelveValores(recopilaSeleccionados());
		const nombres_valores = Object.keys(nombres);
		if (nombres_valores.includes('PVP')) {
			precio = nombres['PVP'];
			VR = nombres['VR'];
			VR2 = recopilaSeleccionados().includes('iPhone') ? nombres['VR2'] : '';
			dibujaCuota(recopilaSeleccionados(), precio, VR, VR2);
		}
		else
		{
			let txt_resultado = document.getElementById("resultado");
			txt_resultado.innerHTML = '';
			container.appendChild(generateHorizontalList(nombres_valores,x));
		}
	}

	function generateHorizontalList(items,nivel) {
		const list = document.createElement('ul');
		list.classList.add('horizontal-list');
		list.id = nivel;
		items.forEach(item => {
			const listItem = document.createElement('li');
			const button = document.createElement('button');
			button.textContent = item;
			button.addEventListener('click', function() {
				const selectedButton = list.querySelector('button.selected');
				const nivel_actual = parseInt(this.parentElement.parentElement.id);
				for (var i = nivel_actual+1; i <10 ; i++) {
					var elem = document.getElementById(i);
						if (elem) elem.parentNode.removeChild(elem);
				}
				if (selectedButton) {
					selectedButton.classList.remove('selected');
				}
				this.classList.add('selected');
				showSelectedItem(this,nivel_actual);
			});
			listItem.appendChild(button);
			list.appendChild(listItem);
		});
		return list;
	}

	document.addEventListener('DOMContentLoaded', function() {
		const container = document.getElementById('list-container');
		const cuerpo = document.getElementById('cuerpo');
		const sinpass = document.getElementById('sinpass');
		cuerpo.style.display="none";
		sinpass.style.display="none";
		const nombres = ['PlanMy Mac','PlanMy iPhone','PlanMy Watch'];
		
		container.appendChild(generateHorizontalList(nombres,0));
	});

	function dibujaCuota(modelo,precio, fv, fv2) {	

		const TIN24 = 9.27;
		const TIN36 = 10.41;


		if (modelo.includes('iPhone')) {
			pv = -precio-18;
			rate = TIN24/100/12; 
			nper = 24;
			pvif = Math.pow(1 + rate, nper);
			pmt = - rate * (pv * pvif + fv) / (pvif - 1);
			intereses = ((pmt*nper)+fv)-precio;	
			linea1 = [nper, pmt, fv, intereses];	
			rate = TIN36/100/12; 
			nper = 36;
			pvif = Math.pow(1 + rate, nper);
			pmt = - rate * (pv * pvif + fv2) / (pvif - 1);
			intereses = ((pmt*nper)+fv2)-precio;	
			linea2 = [nper, pmt, fv2, intereses];		
		}
		else if (modelo.includes('Watch'))
		{
			rate = TIN24/100/12;
			nper = 24;
			pv = -precio-18;
			pvif = Math.pow(1 + rate, nper);
			pmt = - rate * (pv * pvif + fv) / (pvif - 1);
			intereses = ((pmt*nper)+fv)-precio;
			linea1 = [nper, pmt, fv, intereses];
		}
		else
		{
			rate = TIN36/100/12;
			nper = 36;
			pv = -precio-18;
			pvif = Math.pow(1 + rate, nper);
			pmt = - rate * (pv * pvif + fv) / (pvif - 1);
			intereses = ((pmt*nper)+fv)-precio;
			linea1 = [nper, pmt, fv, intereses];	
		}
		codigo_enlace = '<a class="link_precio" title="Pulsa para modificar el precio" href="#" onclick="CambiarPrecio(' + precio+');return false;">';	  
		texto_resultado = 'Importe: '+codigo_enlace+'<b>'+precio+" €</b></a><br/><hr><b>";
		texto_resultado += linea1[0] +'</b> cuotas de <b>'+redondea(linea1[1])+ '€</b><br>';
		texto_resultado += 'Y una última cuota de <b>'+redondea(linea1[2])+' €</b><br>';
		texto_resultado += 'Incluye <b>'+redondea(linea1[3])+ ' €</b> de intereses.';
		if (modelo.includes('iPhone')) {
			texto_resultado += '<br><hr><b>'+linea2[0] +'</b> cuotas de <b>'+redondea(linea2[1])+ '€</b><br>';
			texto_resultado += 'Y una última cuota de <b>'+redondea(linea2[2])+' €</b><br>';
			texto_resultado += 'Incluye <b>'+redondea(linea2[3])+ ' €</b> de intereses';				
		}
		let txt_resultado = document.getElementById("resultado");
		txt_resultado.innerHTML = texto_resultado;
	}

	function redondea(valor){
		if (Number.EPSILON === undefined) {
			Number.EPSILON = Math.pow(2, -52); //Hay que meter esto para que funcione en IE11
		}
		return (Math.round((valor + Number.EPSILON) * 100) / 100);
	}


	function iniciar() {
		if (localStorage.getItem('password')) {
			pass = localStorage.getItem('password');
		} else {
			pass = prompt("Contenido protegido. Introduce la contraseña: ");
		}
		
	decryptAsync(texto_encriptado,pass)
		.then(decryptedText => {
			datos = JSON.parse(decryptedText);
			localStorage.setItem('password', pass);
			document.getElementById("cuerpo").style.display="block";
			document.getElementById('cargando').style.display="none";
		})
		.catch(error => {
			console.error("Error:", error);
			console.log("No se han podido cargar los datos. Se borra la contraseña guardada.");
			document.getElementById("sinpass").style.display="block";
			document.getElementById('cargando').style.display="none";
		});
	}

	window.onload = function() {
		iniciar();
	};

</script>
</head>
	<body translate="no">
		<div class='aviso' id='cargando'>Cargando...</div>
		<div class='aviso' id='sinpass'>No se han podido cargar los datos.<br><a href="#" onclick="location.reload()">Actualiza esta página</a> e introduce la contraseña correcta.</div>

		<div class="cuerpo" id="cuerpo">
			<h2>Simulador PlanMy</h2>
			<div id="list-container"></div>
			<br>
			<div class='aviso'><b>Los valores son aproximados.</b> <br>Por favor, no imprimáis esta hoja.</div>
			<div class='aviso_mini'>
				<br>30/09/24: Nuevos TIN y Series 10/Ultra 2.
			</div>			
			<div id ='resultado' class="resultado">
			</div>
		</div>
		<div class="pie">
			PJEE 2023-2024
		</div>
	</body>
</html>
